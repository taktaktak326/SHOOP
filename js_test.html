<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test IP Fetching</title>
    <link rel="stylesheet" href="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/themes/df-messenger-default.css">
    <script src="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/df-messenger.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f3f3f3;
        }

        header {
            background-color: #4CAF50;
            padding: 10px 20px;
            color: white;
            text-align: center;
        }

        main {
            padding: 20px;
            text-align: center;
        }

        df-messenger {
            z-index: 999;
            position: fixed;
            --df-messenger-font-color: #000;
            --df-messenger-font-family: Google Sans;
            --df-messenger-chat-background: #f3f6fc;
            --df-messenger-message-user-background: #d3e3fd;
            --df-messenger-message-bot-background: #fff;
            --df-messenger-message-actor-image-size: 60px; 
            bottom: 16px;
            right: 16px;
        }

        @media (max-width: 600px) {
            df-messenger {
                width: auto;
                height: auto;
                bottom: 16px;
                right: 16px;
                left: auto;
                top: auto;
                transform: none;
            }
        }
    </style>
</head>
<body>
    <!-- Assume df-messenger is a custom element or iframe -->
    <df-messenger
        project-id="prj-basf-xarviobot-prod"
        agent-id="70e7b395-1db0-4ca2-bb3d-49dc0c222238"
        language-code="ja"
        max-query-length="-1"
        allow-feedback="all"
        url-allowlist="*"
        intent="Start_Conversation">
        <df-messenger-chat-bubble
            chat-title="Publicチャット"
            bot-actor-image="logo-xarvio-field-manager_1.png"
            chat-width="620"
            chat-height="880"
            placeholder-text="メッセージを入力してください。">
        </df-messenger-chat-bubble>
    </df-messenger>

    <script>
        // ページがロードされた後に60秒間待機
        window.addEventListener('DOMContentLoaded', (event) => {
            console.log("ページが読み込まれました。60秒後にチャットを自動的に開きます...");
            
            setTimeout(() => {
                try {
                    const dfMessengerBubble = document.querySelector('df-messenger-chat-bubble');
                    if (dfMessengerBubble) {
                        // チャットボットを開く処理
                        dfMessengerBubble.openChat();
                        console.log("チャットボットが自動的に開かれました。");
                    } else {
                        console.log("df-messenger-chat-bubbleが見つかりませんでした。");
                    }
                } catch (error) {
                    console.error("エラーが発生しました:", error);
                }
            }, 60000); // 60秒間待機
        });
    </script>
</body>
</html>
